<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js">
</script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
<style>
      .navbar {
      margin-bottom: 0;
      background-color: black;
      z-index: 9999;
      border: 0;
      font-size: 12px !important;
      line-height: 1.42857143 !important;
      letter-spacing: 4px;
      border-radius: 0;
      font-family: Montserrat, sans-serif;
  }
  .navbar li a, .navbar .navbar-brand {
      color: #fff !important;
  }
  .navbar-nav li a:hover, .navbar-nav li.active a {
      color: steelblue !important;
      background-color: #fff !important;
  }
  .navbar-default .navbar-toggle {
      border-color: transparent;
      color: #fff !important;
  }
  .jumbotron {
      background-image: url('Images/usmc6.JPG');
      height: 100%; 
      background-position: center;
      background-size: cover;
      border-bottom: 1.2px solid black;
      /*background-color: #812056;*/
      color: black;
      padding: 100px 25px;
      font-family: Montserrat, sans-serif;
      font-weight: 900;
  }
    .jumbotron h1{
        text-shadow: 4px 4px 4px black; 
        color: white; 
        font-family: Catamaran,Helvetica,Arial,sans-serif; 
        font-weight: 200; 
        letter-spacing: 1px;
    }
  @media screen and (max-width: 768px) {
    .col-sm-3 {
      text-align: center;
      margin: 25px 0;
    }
    .btn-lg {
        width: 100%;
        margin-bottom: 35px;
    }
  }
  @media screen and (max-width: 480px) {
    .logo {
        font-size: 150px;
    }
  }
</style>
</head>
<body ng-app="myApp">
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#/!">Home</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#!page1">Code Word</a></li>
        <li><a href="#!page2">Sum Puzzles</a></li>
        <li><a href="#!page3">Number Guess</a></li>
        <li><a href="#!page4">War</a></li>
      </ul>
    </div>
  </div>
</nav>
<div ng-view style="color: black"></div>
<br>
<!--
<footer class="footer navbar-fixed-bottom container-fluid text-center" style="background-color: #10102c">
<br>
    <p style="color: white">By <a style="color: white" href="mailto: shadiyahmangru@gmail.com" title="contact Shadiyah Mangru">Shadiyah Mangru</a></p>
<br>
</footer>
--> 
<script src="scripts/page2Ctrl.js"></script>  
<script>
var app = angular.module("myApp", ["ngRoute"]);
app.config(function($routeProvider) {
    $routeProvider
    .when("/", {
        templateUrl: "html/main.html",
        controller : "mainCtrl"
    })
    .when("/page1", {
        templateUrl: "html/page2.html",
        controller : "page1Ctrl"
    })
    .when("/page2", {
        templateUrl: "html/page1.html",
        controller : "page2Ctrl"
    })
    .when("/page3", {
        templateUrl: "html/page3.html",
        controller : "page3Ctrl"
    })
    .when("/page4", {
        templateUrl: "html/page4.html",
        controller : "page4Ctrl"
    });
});
app.controller("mainCtrl", function ($scope){
   $scope.mainTitle = "APP-lied Sciences Adventures"; 
   $scope.contentsHeader = "APP-ly Your Quantitative and Verbal Skills";
   $scope.descrip1 = "Avert disaster by arranging the numbers in a winning combination during Sum Puzzles";
   $scope.descrip2 = "Accept your secret mission by strategically entering vowels during Code Word";
   $scope.descrip3 = "Disarm explosives by strategically bisecting numeric intervals during Number Guess";
   $scope.descrip4 = "Achieve victory with correct quantitative comparisons during War";
});
app.controller("page2Ctrl", function ($scope) {
    $scope.mainTitle = "Sum Puzzles";
    $scope.contentsHeader = "Stay afloat during a cyber attack on your ship’s navigation systems.  To regain control of your ship, militants require you to exercise your quantitative reasoning skills and successfully solve a numeric puzzle.  Familiarize yourself with the rules located to the left, then select a difficulty level to begin your mission. (In Progress)";

    $scope.directions = "";
    
//**********************************
//Sum Puzzles Game source code
//**********************************
        $scope.val1 = true;
        $scope.val2 = false;
        $scope.val3 = false;
        
        $scope.isShowHide = function (param){
            $("#aDiv").css("display", "block");
            if(param=="v1"){
                $scope.val1=true;
                $scope.val2 = true;
                $scope.val3=true;
            }
            else if(param=="v2"){
                $scope.val1=false;
                $scope.val2=false;
                $scope.val3=true;
            }
            else if(param=="v3"){
                $scope.val1=false;
                $scope.val2=true;
                $scope.val3=false;
            }
            else{
                $scope.val1=true;
                $scope.val2=false;
                $scope.val3=false;
            }
        }
    
    $scope.easyGB1key = "KEY: The sum of the purple squares is 8, and the green squares is 10.";
    
    $scope.btn1 = {value : 1, "background-color" : "rebeccapurple", "color" : "white"};
    $scope.btn2 = {value : 1, "background-color" : "rebeccapurple", "color" : "white"};
    $scope.btn3 = {value : 1, "background-color" : "rebeccapurple", "color" : "white"};
    $scope.btn4 = {value : 1, "background-color" : "rebeccapurple", "color" : "white"};
    $scope.btn5 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.btn6 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.btn7 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.btn8 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.btn9 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    
    $scope.winLoseMessage;
    
    
    $scope.mediumGB1key = "KEY: The sum of the red squares is 15, the purple squares is 5, and the green squares is 20.";
    
    $scope.Mbtn1 = {value : 1, "background-color" : "rebeccapurple", "color" : "white"};
    $scope.Mbtn2 = {value : 1, "background-color" : "rebeccapurple", "color" : "white"};
    $scope.Mbtn3 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn4 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn5 = {value : 1, "background-color" : "#A8224A", "color" : "white"};
    $scope.Mbtn6 = {value : 1, "background-color" : "#A8224A", "color" : "white"};
    $scope.Mbtn7 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn8 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn9 = {value : 1, "background-color" : "#A8224A", "color" : "white"};
    $scope.Mbtn10 = {value : 1, "background-color" : "#A8224A", "color" : "white"};
    $scope.Mbtn11 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn12 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn13 = {value : 1, "background-color" : "#A8224A", "color" : "white"};
    $scope.Mbtn14 = {value : 1, "background-color" : "#A8224A", "color" : "white"};
    $scope.Mbtn15 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    $scope.Mbtn16 = {value : 1, "background-color" : "#2c8309", "color" : "white"};
    
    $scope.MwinLoseMessage;
    
    
$scope.clickSq = function(btn, num) {
    if(btn<num){
        btn++;
    }
    else{
        btn = 1;
    }
    return btn;
}; 
    
$scope.noRepeats = function(a, num){
    var sv = true;
    for(var i=1; i<(num+1); i++){
        if(a.indexOf(i)===-1){
            sv = false;
        }
    }
    return sv;
}
 
$scope.solutionFeedback = function(sv, sc){
    var winOrLose = "";
    if(sv === false && sc ===false){
        winOrLose = "No repeated numbers allowed per row/column.  Sums of color-coded regions do not match key.  Try again!";
    }
    else if(sv === false && sc ===true){
        winOrLose = "No repeated numbers allowed per row/column.Try again!";
    }
    else if(sv === true && sc ===false){
        winOrLose = "Sums of color-coded regions do not match key.  Try again!";
    }
    else{
        winOrLose = "Hooray!  You have successfully solved this puzzle!  You have regained control of your navigation system.";
    }
    return winOrLose;
};
    
$scope.submitSolution = function(num) {
    var solutionValid = true;
    var sumsCorrect = true;
    //check if 1,2,3 only used once per row
    var row1 = "";
    var row2 = "";
    var row3 = "";
    row1 = $scope.btn1.value.toString() + $scope.btn2.value + $scope.btn3.value;
    row2 = $scope.btn4.value.toString() + $scope.btn5.value + $scope.btn6.value;
    row3 = $scope.btn7.value.toString() + $scope.btn8.value + $scope.btn9.value;
    if($scope.noRepeats(row1, 3)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(row2, 3)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(row3, 3)===false){
        solutionValid = false;
    }
    
    //alert("rows: " + $scope.solutionValid);
    
    //check if 1,2,3 only used once per column
    var col1 = "";
    var col2 = "";
    var col3 = "";
    col1 = $scope.btn1.value.toString() + $scope.btn4.value + $scope.btn7.value;
    col2 = $scope.btn2.value.toString() + $scope.btn5.value + $scope.btn8.value;
    col3 = $scope.btn3.value.toString() + $scope.btn6.value + $scope.btn9.value;
    if($scope.noRepeats(col1, 3)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(col2, 3)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(col3, 3)===false){
        solutionValid = false;
    }    
      
    //alert("columns: " + $scope.solutionValid);
    
    //check if each color-coded region sums to specified values
    var purpleSum = $scope.btn1.value + $scope.btn2.value + $scope.btn3.value +                             $scope.btn4.value;
    if(purpleSum !== 8){
        sumsCorrect = false;
    }
    var greenSum = $scope.btn5.value + $scope.btn6.value + $scope.btn7.value +                              $scope.btn8.value + $scope.btn9.value;
    if(greenSum !== 10){
        sumsCorrect = false;
    }
    
    //alert($scope.sumsCorrect);
    
    $scope.winLoseMessage = $scope.solutionFeedback(solutionValid, sumsCorrect);
};

    
$scope.MsubmitSolution = function(num) {
    var solutionValid = true;
    var sumsCorrect = true;
    //check if 1,2,3,4 only used once per row
    var row1 = "";
    var row2 = "";
    var row3 = "";
    var row4 = "";
    row1 = $scope.Mbtn1.value.toString() + $scope.Mbtn2.value + $scope.Mbtn3.value + $scope.Mbtn4.value;
    row2 = $scope.Mbtn5.value.toString() + $scope.Mbtn6.value + $scope.Mbtn7.value + $scope.Mbtn8.value;
    row3 = $scope.Mbtn9.value.toString() + $scope.Mbtn10.value + $scope.Mbtn11.value + $scope.Mbtn12.value;
    row4 = $scope.Mbtn13.value.toString() + $scope.Mbtn14.value + $scope.Mbtn15.value + $scope.Mbtn16.value;
    if($scope.noRepeats(row1, 4)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(row2, 4)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(row3, 4)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(row4, 4)===false){
        solutionValid = false;
    }

    //alert("rows: " + $scope.MsolutionValid);
    
    //check if 1,2,3,4 only used once per column
    var col1 = "";
    var col2 = "";
    var col3 = "";
    var col4 = "";
    col1 = $scope.Mbtn1.value.toString() + $scope.Mbtn5.value + $scope.Mbtn9.value + $scope.Mbtn13.value;
    col2 = $scope.Mbtn2.value.toString() + $scope.Mbtn6.value + $scope.Mbtn10.value + $scope.Mbtn14.value;
    col3 = $scope.Mbtn3.value.toString() + $scope.Mbtn7.value + $scope.Mbtn11.value + $scope.Mbtn15.value;
    col4 = $scope.Mbtn4.value.toString() + $scope.Mbtn8.value + $scope.Mbtn12.value + $scope.Mbtn16.value;
    if($scope.noRepeats(col1, 4)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(col2, 4)===false){
        solutionValid = false;
    } 
    if($scope.noRepeats(col3, 4)===false){
        solutionValid = false;
    }
    if($scope.noRepeats(col4, 4)===false){
        solutionValid = false;
    }
  
    //alert("columns: " + $scope.solutionValid);
    
    //check if each color-coded region sums to specified values
    var redSum = $scope.Mbtn5.value + $scope.Mbtn6.value + $scope.Mbtn9.value +                             $scope.Mbtn10.value + $scope.Mbtn13.value + $scope.Mbtn14.value;
    if(redSum !== 15){
        sumsCorrect = false;
    }
    
    var purpleSum = $scope.Mbtn1.value + $scope.Mbtn2.value;
    
    if(purpleSum !== 5){
        sumsCorrect = false;
    }
    
    var greenSum = $scope.Mbtn3.value + $scope.Mbtn4.value + $scope.Mbtn7.value +                          $scope.Mbtn8.value + $scope.Mbtn11.value + $scope.Mbtn12.value +                        $scope.Mbtn15.value + $scope.Mbtn16.value;
    if(greenSum !== 20){
        sumsCorrect = false;
    }
    
    //alert($scope.MsumsCorrect);
    $scope.MwinLoseMessage = $scope.solutionFeedback(solutionValid, sumsCorrect);
};

    //var rbpg = ["10", "27", "16", "22"];
    //var answerKeyC = ["rrbbb", "rrbbb", "pppbb", "pppgg", "ggggg"];
    //var key = "<br><span style='color: #003399; font-size: 120%; font-weight: 600'><u>KEY:</u></span> \n\nThe sum of: (i) the <span style='color:#A8224A'>red</span> squares is " + rbpg[0] + ", (ii) the <span style='color: #3766BD'>blue</span> squares is " + rbpg[1] + ", (iii) the <span style='color: rebeccapurple'>purple</span> squares is " + rbpg[2] + ", (iv) the <span style='color: #2c8309'>green</span> squares is " + rbpg[3] + "."; 
  
    //BLUE: background-color: #3766BD'"          
    //var aSolution = ["13425", "42351", "25143", "51234", "34512"];    
    
});
 
//**********************************************    
app.controller("page1Ctrl", function ($scope) {
    $scope.mainTitle = "Code Word";
    $scope.contentsHeader = "Entering the correct code word makes your mission possible.";
    
    $scope.easyWords = ["flower", "cake", "rain", "tree", "bee", "frozen", "snow", "leaf", "hot", "apple", "star", "four", "cat", "zoo", "car", "train", "jump", "bag", "store", "heart", "hat", "sun", "bye", "egg", "joy", "eye", "owl", "sky", "cow", "mall", "milk"];
    
    $scope.mediumWords = ["January", "computer", "television", "soccer", "dinosaur", "shovel", "garden", "cucumber", "parade", "watermelon", "cupcake", "pizza", "tiger", "giant", "unicorn", "octopus", "volcano", "meteor", "ocean", "beach", "cloud", "elephant", "bakery", "forest", "wizard", "drum", "couch", "rainbow", "glitter", "window", "wand", "potato"];
    
    $scope.hardWords = ["dolphin", "instrument", "blender", "gasoline", "cantaloupe", "firefighter", "icicle", "thunder", "telephone", "locomotive", "triangle", "thirteen", "eight", "tricycle", "automobile", "circle", "gymnastics", "subtraction", "skyscraper", "piano", "ballet", "rectangle", "astronaut", "restaurant", "baseball", "cylinder", "country", "Quebec", "treasure"];  
    
    $scope.randArrayE = function(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }; 
    
    $scope.mysteryWord = "";
    $scope.alreadyGuess;
    $scope.lives;
    $scope.answerFormat =[];
    
    $scope.disableSubmit = true;
    $scope.disableEasy = false;
    $scope.disableMedium = false;
    $scope.disableHard = false;
     
    $scope.guess;
    $scope.cwFormat;
    $scope.aGuess;
    
$scope.playGame = function(num){
    $scope.lives=7;
    $scope.alreadyGuess = [];
    if(num==3){
        $scope.mysteryWord = $scope.randArrayE($scope.hardWords);
    }
    else if(num==2){
        $scope.mysteryWord = $scope.randArrayE($scope.mediumWords);
    }
    else{
        $scope.mysteryWord = $scope.randArrayE($scope.easyWords);
    }
    $scope.mysteryWord = $scope.mysteryWord.toUpperCase();
    $scope.answerFormat[$scope.mysteryWord.length];
    for(var i=0; i<$scope.mysteryWord.length; i++){
        $scope.answerFormat[i] = "_ ";
    }
    $scope.cwFormat = "CODE WORD FORMAT: " + $scope.answerFormat.join("");
    $scope.disableSubmit = false;
    $scope.disableEasy = true;
    $scope.disableMedium = true;
    $scope.disableHard = true;
    return $scope.mysteryWord;
};    
    
$scope.feedback = "";
//only accepts letters as input
$scope.aLetter;
$scope.checkInp = function(){
    $scope.aLetter = true;
    var inp=$scope.guess;
    var regex=/^[a-zA-Z]+$/;
    if (!inp.match(regex))
    {
        $scope.feedback="Must input a letter.  Try Again!";
        return $scope.aLetter = false;
    }
};   

//*************************************************************************
//function to get letter guess from user and output feedback based on guess
//*************************************************************************   
$scope.CWSubmit = function() {
    $scope.guess = $scope.guess.toUpperCase();
    $scope.checkInp();
    if($scope.guess.length==1 & $scope.aLetter===true){
        //if current letter has already been guessed during this round, retrieve another guess from user
        if($scope.alreadyGuess.indexOf($scope.guess)!=-1){
            $scope.feedback = "You have already entered " + $scope.guess + ".  You still have " + $scope.lives + " tries remaining.  Try again!"; 
            $scope.guess = "";
        }
        //if current letter guess is in word, show user updated mystery word format key
        else if($scope.mysteryWord.indexOf($scope.guess)!=-1 & $scope.alreadyGuess.indexOf($scope.guess)==-1){
            $scope.alreadyGuess.unshift($scope.guess);
            for(var i=0; i < $scope.mysteryWord.length; i++){
						if($scope.mysteryWord.charAt(i)==$scope.guess.charAt(0)){
							$scope.answerFormat[i] = $scope.guess + " ";	
						}
					}
            $scope.cwFormat = "CODE WORD FORMAT: " + $scope.answerFormat.join("");
            $scope.guess = "";
            $scope.aGuess = "ALREADY ENTERED: " + $scope.alreadyGuess.join(", ");
        
        //ask user for another letter guess, if answer key still contains dashes
            if($scope.answerFormat.indexOf("_ ")!=-1){
                    $scope.feedback = "Good Work!  Keep trying!  You have " + $scope.lives + " tries remaining.";
            }
        //output winner message if no dashes remain in answer key
            else{
                $scope.feedback = "  ACCESS TO MISSION GRANTED!!!";
                $scope.cwFormat = "CODE WORD: " + $scope.answerFormat.join("");
                $scope.disableSubmit = true;
            }
        }   
        //if current letter guess not in word, decrease 'lives' by one
        else if($scope.mysteryWord.indexOf($scope.guess)==-1){
            $scope.alreadyGuess.unshift($scope.guess);
            $scope.lives--;
            $scope.aGuess = "ALREADY ENTERED: " + $scope.alreadyGuess.join(", ");
             
            //retrieve another letter guess from user if 'lives' remain
            if($scope.lives>0){
                $scope.feedback = $scope.guess.toUpperCase() + " is not in the word.  Enter another letter!  You have " + $scope.lives + " tries remaining.";
                $scope.guess = "";
            }
            else{
            //output mystery word and a game over message to user if no 'lives' remain
                $scope.feedback =  "ACCESS DENIED.  The Code Word was " + $scope.mysteryWord.toUpperCase() + " but has now been changed.";
                $scope.disableSubmit = true;
            }
        }
} 
};
    
//submit input upon pressing enter key   
$("#HMLetterGuess").keyup(function(event) {
    if (event.keyCode === 13) {
        $("#HMSubmit").click();
    }
});      

}); 
    
//**************************************************    
app.controller("page3Ctrl", function ($scope) {
    $scope.mainTitle = "Number Guess";
    $scope.contentsHeader = "Thwart bomber Simon’s diabolical scheme by besting him at his own game.  Simon says: the computer is thinking of a number between 1 and 100, inclusive.  Prevent detonation by identifying the number in 10 guesses or less.";
 
//function to generate a random integer between two values
	$scope.getRandomInt = function(min, max) {
		min = Math.ceil(min);
		max = Math.floor(max);
		return Math.floor(Math.random() * (max - min)) + min; //max exclusive, min inclusive
	};    
    
$scope.computerNumber = $scope.getRandomInt(1, 101);
$scope.remGuess = 10;
$scope.alreadyG = [];
$scope.aNumber;
$scope.ngFeedback;
$scope.disableSubmitG = false;
$scope.aGuessed;

//only accepts numbers as input
$scope.checkNGInp = function (){
    $scope.aNumber = true;
    var inp=$("#guess").val();
    var regex=/^[0-9]+$/;
    if (!inp.match(regex))
    {
        $scope.ngFeedback = "Must input a number.  Try Again!";
        return $scope.aNumber = false;
    }
};

$scope.playerGuess;
//checks if guess is correct and provides user with feedback
    $scope.submitNG = function (){
        var repeat=false;
		$scope.playerGuess = parseInt($scope.playerGuess);
        $scope.computerNumber = parseInt($scope.computerNumber);
        $scope.checkNGInp();
        if($scope.alreadyG.indexOf($scope.playerGuess)!=-1){
            repeat=true;
        }
        else if($scope.aNumber===false){
           $scope.ngFeedback = "You may only input numbers.  You still have " + $scope.remGuess + " guesses remaining.  Try Again!"; 
           $scope.playerGuess = "";
        }
        else{
        $scope.alreadyG.unshift($scope.playerGuess);
        $scope.aGuessed = "Previous Guesses: " + $scope.alreadyG.join(", ");
		$scope.remGuess--;
        }
		if($scope.playerGuess===$scope.computerNumber && $scope.remGuess > 0){
			$scope.ngFeedback = "Bomb successfully disarmed! The number was " + $scope.computerNumber + " and it only took you " + (10-$scope.remGuess) + " tries!";
            $scope.playerGuess = "";
            $scope.disableSubmitG = true;
		}
        else if(repeat===true){
           $scope.ngFeedback = "You have already guessed " + $scope.playerGuess + ".  You still have " + $scope.remGuess + " guesses remaining.  Try Again!"; 
           $scope.playerGuess = "";
        }
		else if($scope.playerGuess !== $scope.computerNumber && $scope.remGuess > 0){
			if($scope.playerGuess > $scope.computerNumber){
            if($scope.remGuess===10){
                $scope.remGuess--;
            }
			$scope.ngFeedback = "LOWER than " + $scope.playerGuess + "..." + $scope.remGuess + " guesses remaining!"; 
            $scope.playerGuess = "";
			}
			else if($scope.playerGuess < $scope.computerNumber){
                if($scope.remGuess===10){
                $scope.remGuess--;
                }
				$scope.ngFeedback = "HIGHER than " + $scope.playerGuess + "..." + $scope.remGuess + " guesses remaining!";
                $scope.playerGuess = "";
			}
		}
		else if($scope.remGuess===0){
			$scope.ngFeedback = "Disaster!  You are out of guesses. The correct number was " + $scope.computerNumber + ".";
            $scope.playerGuess = "";
            $scope.disableSubmitG = true;
		}
    }; 
    
//submit input upon pressing enter key   
$("#guess").keyup(function(event) {
    if (event.keyCode === 13) {
        $("#submitG").click();
    }
});  
    
});
 
//**********************************************
    
//FIX:
//1. when score gets highlighted upon win (currently highlighted one round too early)
//2. quantitative comparisons tie button (so that play war becomes active again upon pressing)
app.controller("page4Ctrl", function ($scope) {
    $scope.mainTitle = "War";
    $scope.contentsHeader = "Successfully free hostages from capture and end your final mission with accurate quantitative comparisons.  During a game of War, correctly identify the victor of each battle.  Familiarize yourself with the rules of this card game below, then press ‘Play War’ to begin.";
    
    $scope.deck = [];
    $scope.dealerDeck = [];
    $scope.youDeck = [];
    $scope.dealerScore = 0;
    $scope.youScore = 0;
    $scope.cardsLeft;
    $scope.youCard;
    $scope.dealerCard;

    $scope.disablePlayWar = false;
    $scope.flipCounter=0;
    $scope.correctCounter = 0;
    $scope.QCScore;
    
    $scope.roundWinMessage = "";
    $scope.roundWinner;
    $scope.click=false;

    $scope.cardP1 = {num:"W", src:"Images/diamonds.png", "color" : "red"};
    $scope.cardP2 = {num:"W", src:"Images/clubs.png", "color" : "black"};
    
    $scope.P1LabelStyle = {"background-color" : "white"};
    $scope.P1ScoreStyle = {"background-color" : "white"};
    $scope.P2LabelStyle = {"background-color" : "white"};
    $scope.P2ScoreStyle = {"background-color" : "white"};    
    
//construct a standard 52-card deck
$scope.makeDeck = function (){
    $scope.dealerScore = 0;
    $scope.youScore = 0;
    $scope.suitOfDeck("c");
    $scope.suitOfDeck("s");
    $scope.suitOfDeck("h");
    $scope.suitOfDeck("d");
};

//make quarter of deck corresponding to a particular suit
$scope.suitOfDeck = function (suit){
    for(var i=1; i<14; i++){
        $scope.deck.unshift(i + "," + suit);
    }
};
    
//shuffle deck
$scope.shuffle = function (array) { //adapted from Fisher-Yates shuffle
    let counter = array.length;
    // While there are elements in the array
    while (counter > 0) {
        // Pick a random index
        let index = Math.floor(Math.random() * counter);
        // Decrease counter by 1
        counter--;
        // And swap the last element with it
        let temp = array[counter];
        array[counter] = array[index];
        array[index] = temp;
    }  
    return array;
};

$scope.splitDeck = function (){
    $scope.dealerDeck = $scope.deck.slice(0, 26);
    $scope.youDeck = $scope.deck.slice(26, 52);
};
    
//'flip' 1 card from each deck
$scope.flipCard = function (){
    $scope.flipCounter++;
    $scope.disablePlayWar = true;
    $scope.P1LabelStyle["background-color"] = "white";
    $scope.P2LabelStyle["background-color"] = "white";
    $scope.roundWinMessage = "";
    
    $scope.youCard = $scope.youDeck[26-$scope.cardsLeft];
    var imgAndColor = $scope.cardImage($scope.youCard, $scope.cardP1.src, $scope.cardP1.color);
    $scope.cardP1.color = imgAndColor.cardNumStyle;
    $scope.cardP1.src = imgAndColor.imgID;
    $scope.cardP1.num = $scope.cardNumber($scope.youCard, $scope.cardP1.num);
    
    $scope.dealerCard = $scope.dealerDeck[26-$scope.cardsLeft];
    var imgAndColorP2 = $scope.cardImage($scope.dealerCard, $scope.cardP2.src, $scope.cardP2.color);
    $scope.cardP2.color = imgAndColorP2.cardNumStyle;
    $scope.cardP2.src = imgAndColorP2.imgID;
    $scope.cardP2.num = $scope.cardNumber($scope.dealerCard, $scope.cardP2.num);
    
    $scope.cardsLeft--;
    $scope.score();
    
    if($scope.cardsLeft===0){
        //disable war button when each 26 card pile has no cards remaining
        //display a results message -- congrats to winner
        $scope.disablePlayWar = true;
        $scope.P1LabelStyle["background-color"] = "white";
        $scope.P2LabelStyle["background-color"] = "white";
        if($scope.youScore > $scope.dealerScore){
            //Player 1 WINS
            $scope.P1ScoreStyle["background-color"] = "yellow";
        }
        else if($scope.youScore < $scope.dealerScore){
            //Player 2 WINS
            $scope.P2ScoreStyle["background-color"] = "yellow";
        }
        else{
            //IT IS A TIE
            $scope.P1ScoreStyle["background-color"] = "yellow";
            $scope.P2ScoreStyle["background-color"] = "yellow";
        }
    }
};
    
//function to determine which suit to display on screen
$scope.cardImage = function (cardType, imgID, cardNumStyle){
    if(cardType.split(",")[1]=="h"){
        imgID = "Images/hearts.png";
        cardNumStyle = "red";
    }
    else if(cardType.split(",")[1]=="d"){
        imgID = "Images/diamonds.png";
        cardNumStyle = "red";
    }
    else if(cardType.split(",")[1]=="c"){
        imgID="Images/clubs.png";
        cardNumStyle = "black";
    }
    else if(cardType.split(",")[1]=="s"){
        imgID="Images/spades.png";
        cardNumStyle = "black";
    }
    return {
        cardNumStyle : cardNumStyle,
        imgID : imgID
    };
};
    
//function to determine if a number or K, Q, J, A displayed on screen
$scope.cardNumber = function (cardNum, cardN){
    if(cardNum.split(",")[0]==="13"){
        cardN = "K";
    }
    else if(cardNum.split(",")[0]==="12"){
        cardN = "Q";
    }
    else if(cardNum.split(",")[0]==="11"){
        cardN = "J";
    }
    else if(cardNum.split(",")[0]==="1"){
        cardN = "A";
    }
    else{
        cardN = cardNum.split(",")[0].toString();
    }
    return cardN;
};
      
//*****************
$scope.whoWon = function (num) {
    if(num===1){
        $scope.roundWinner='you';
    }
    else if(num===2){
        $scope.roundWinner='computer';
    }
    else if(num===3){
        $scope.roundWinner='tie';
    }
    $scope.click=true;
    $scope.score();  
    $scope.disablePlayWar = false;
    $scope.QCScore = $scope.correctCounter + "/" + $scope.flipCounter;
};

//a function to compare cards and adjust score based on flipped card values
$scope.score = function (){
    //if dealer card < you card, +2 you
    if(parseInt($scope.youCard.split(",")[0]) > parseInt($scope.dealerCard.split(",")[0]) && $scope.click===true){
        if($scope.roundWinner==='you'){
            $scope.roundWinMessage = " Yes, player 1 won that round!";
            $scope.correctCounter++;
        }
        else{
            $scope.roundWinMessage = " Actually, player 1 won that round!";
        }
        var addPoints = 2;
        $scope.youScore+=parseInt(addPoints);
        $scope.P1LabelStyle["background-color"] = "yellow";
        $scope.P2LabelStyle["background-color"] = "white";
    }
    //if dealer card > you card, +2 dealer
    else if(parseInt($scope.youCard.split(",")[0]) < parseInt($scope.dealerCard.split(",")[0]) && $scope.click===true){
        if($scope.roundWinner==='computer'){
            $scope.roundWinMessage = " Yes, player 2 won that round!";
            $scope.correctCounter++;
        }
        else{
            $scope.roundWinMessage = " Actually, player 2 won that round!";
        }
        var addPoints = 2;
        $scope.dealerScore+=parseInt(addPoints);
        $scope.P1LabelStyle["background-color"] = "white";
        $scope.P2LabelStyle["background-color"] = "yellow";
    }
    //if dealer card = you card, flip again without adjusting score (once tie broken, score of winner increased by total number cards flipped since tie began). //WORK ON THIS CONDITION
    else if($scope.click===true){
        if($scope.roundWinner==='tie'){
            $scope.roundWinMessage = " Yes, this round we have a tie!";
            $scope.correctCounter++;
        }
        else{
            $scope.roundWinMessage = " Actually, this round we have a tie!";
        }
        $scope.P1LabelStyle["background-color"] = "white";
        $scope.P2LabelStyle["background-color"] = "white";
        $scope.score();
    }
    $scope.click=false;
};

$scope.loadGame = function (){
    $scope.makeDeck();
    $scope.shuffle($scope.deck);
    $scope.splitDeck(); 
    $scope.cardsLeft = 26;
};
    
$scope.loadGame();
        
});
</script>   
    
</body>
</html>